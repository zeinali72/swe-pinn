{
   "name": "jax-ml-workspace",
   "containerName": "jax-ml-workspace",
   "shutdownAction": "none",

   "build": {
     "context": ".",
     "dockerfile": "Dockerfile",
     "args": { "NO_CACHE": "1" }
   },

   "envFile": [ "devcontainer.env" ],

   // --- START: ADD containerEnv ---
   "containerEnv": {
     "LD_LIBRARY_PATH": "/usr/local/cuda/lib64:${containerEnv:LD_LIBRARY_PATH}"
   },
   // --- END: ADD containerEnv ---


   "runArgs": [ "--gpus=all", "--restart", "unless-stopped" ],

   "mounts": [
  {
    "source": "${localEnv:HOME}${localEnv:USERPROFILE}/.gitconfig",
    "target": "/root/.gitconfig",
    "type": "bind"
  },
  // --- ADD THIS BLOCK ---
  {
    "source": "${localEnv:HOME}${localEnv:USERPROFILE}/.ssh",
    "target": "/root/.ssh",
    "type": "bind",
    "consistency": "cached",
    "readonly": true 
  }
  // --- END OF BLOCK ---
],

   "containerUser": "root",

   "customizations": {
     "vscode": {
       "extensions": [
         "ms-python.python",
         "ms-python.vscode-pylance",
         "ms-toolsai.jupyter",
         "ms-toolsai.jupyter-renderers"
       ]
     }
   }
 }