# Configuration and Constants (Modified for DGMNetwork)
training:
  learning_rate: 0.0001           # <<<--- Suggested starting lower for DGM
  epochs: 20000                   # Number of training epochs
  batch_size: 512                # Batch size for training (2**10)
  seed: 42                       # Random seed for reproducibility

scenario: "one_building_DEM_zero" # For loading validation_sample.npy

model:
  name: "DGMNetwork"             # <<<--- Changed model name
  width: 512                     # <<<--- M in DGM paper (units per layer)
  depth: 4                      # <<<--- L in DGM paper (number of DGM layers)
  output_dim: 3                 # Your output dim (h, hu, hv)
  # Removed FourierPINN specific parameters (kernel_init, bias_init, ff_dims, fourier_scale)

domain:
  lx: 1200.0                     # Length of the domain in x-direction (m)
  ly: 100.0                      # Length of the domain y-direction (m)
  t_final: 3600.0                # Final time of simulation (s)

grid:
  nx: 48                         # Number of grid points in x-direction for PDE
  ny: 23                         # Number of grid points in y-direction for PDE
  nt: 21                         # Number of grid points in time for PDE

ic_bc_grid:
  nx_ic: 39                      # Number of grid points in x for initial condition
  ny_ic: 33                      # Number of grid points in y for initial condition
  ny_bc_left: 24                 # Number of grid points in y for left boundary
  nt_bc_left: 18                 # Number of grid points in time for left boundary
  ny_bc_right: 33                # Number of grid points in y for right boundary
  nt_bc_right: 11                # Number of grid points in time for right boundary
  nx_bc_bottom: 70               # Number of grid points in x for bottom boundary
  nt_bc_other: 15                # Number of grid points in time for other boundaries
  nx_bc_top: 69                  # Number of grid points in x for top boundary

building:
  x_min: 325.0
  x_max: 375.0
  y_min: 25.0
  y_max: 75.0
  nx: 20  # Sampling density for bottom/top walls
  ny: 20  # Sampling density for left/right walls
  nt: 20  # Sampling density over time

physics:
  u_const: 0.29                  # Constant velocity (m/s)
  n_manning: 0.03                # Manning's roughness coefficient
  inflow: null                   # Inflow rate (null if not used)
  g: 9.81                        # Gravitational acceleration (m/s^2)

loss_weights:
  pde_weight: 739697.429819995   # Weight for PDE loss term (keep original or tune)
  bc_weight: 52.451320991170604  # Weight for boundary condition loss term (keep original or tune)
  ic_weight: 55.79602913312669   # Weight for initial condition loss term (keep original or tune)
  building_bc_weight: 50.0      # Weight for building boundary condition loss (keep original or tune)
  data_weight: 100.0              # Weight for the data loss term (keep original or tune)

gradnorm:
  enable: True # Set to True to use GradNorm, False for static weights
  alpha: 1.5   # Restoring force strength (common value)
  learning_rate: 0.01 # Learning rate for updating the weights w_i
  update_freq: 100 # How often (in steps) to update GradNorm weights

plotting:
  nx_val: 101                    # Number of points for validation plot in x-direction
  t_const_val: 1800.0            # Time for validation plot (0.5 * t_final)
  y_const_plot: 0                # Y-coordinate for validation plot (m)
  plot_resolution: 500           # Resolution for 2D plot

device:
  dtype: "float32"               # Data type for JAX computations
  early_stop_min_epochs: 4000
  early_stop_patience: 3000

numerics:
  eps: 1e-6                      # Small epsilon for numerical stability