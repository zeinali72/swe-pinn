#!/bin/bash

# Ensure directories for databases and logs exist
mkdir -p optimisation/database/exploitation
mkdir -p optimisation/logs/exploitation

echo "Starting all Exploitation Optimization runs (50 trials each)..."

# 1. DGM Network - With Building
echo "Running: DGM Network (With Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_dgm_building.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-dgm-building" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-dgm-building.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-dgm-building.log

# 2. DGM Network - No Building
echo "Running: DGM Network (No Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_dgm_nobuilding.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-dgm-nobuilding" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-dgm-nobuilding.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-dgm-nobuilding.log

# 3. Fourier PINN - With Building
echo "Running: Fourier PINN (With Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_fourier_building.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-fourier-building" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-fourier-building.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-fourier-building.log

# 4. Fourier PINN - No Building
echo "Running: Fourier PINN (No Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_fourier_nobuilding.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-fourier-nobuilding" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-fourier-nobuilding.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-fourier-nobuilding.log

# 5. MLP - With Building
echo "Running: MLP (With Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_mlp_building.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-mlp-building" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-mlp-building.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-mlp-building.log

# 6. MLP - No Building
echo "Running: MLP (No Building)..."
python3 -u -m optimisation.run_optimization \
  --config optimisation/configs/exploitation/hpo_exploitation_mlp_nobuilding.yaml \
  --n_trials 50 \
  --study_name "hpo-exploitation-mlp-nobuilding" \
  --storage "sqlite:///optimisation/database/exploitation/hpo-exploitation-mlp-nobuilding.db" \
  2>&1 | tee optimisation/logs/exploitation/hpo-exploitation-mlp-nobuilding.log

echo "All optimization runs completed."